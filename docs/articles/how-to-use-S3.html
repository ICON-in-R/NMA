<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to use `nma` S3 methods â€¢ NMA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to use `nma` S3 methods">
<meta property="og:description" content="NMA">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NMA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/how-to-use-S3.html">How to use `nma` S3 methods</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ICON-in-R/NMA/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="how-to-use-S3_files/header-attrs-2.5/header-attrs.js"></script><link href="how-to-use-S3_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="how-to-use-S3_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to use <code>nma</code> S3 methods</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ICON-in-R/NMA/blob/master/vignettes/how-to-use-S3.Rmd"><code>vignettes/how-to-use-S3.Rmd</code></a></small>
      <div class="hidden name"><code>how-to-use-S3.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This document describes how to use the main functions of <code>NMA</code> to run a network meta-analysis.</p>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://icon-in-r.github.io/NMA">NMA</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span></pre></div>
<div id="settings" class="section level3">
<h3 class="hasAnchor">
<a href="#settings" class="anchor"></a>Settings</h3>
<p>Define the BUGS parameters for MCMC.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="va">bugs_params</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    PROG <span class="op">=</span> <span class="st">"openBugs"</span>,
    N.BURNIN <span class="op">=</span> <span class="fl">10</span>,<span class="co">#00,</span>
    N.SIMS <span class="op">=</span> <span class="fl">150</span>,<span class="co">#0,</span>
    N.CHAINS <span class="op">=</span> <span class="fl">2</span>,
    N.THIN <span class="op">=</span> <span class="fl">1</span>,
    PAUSE <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></pre></div>
<p>Define the scenario we will use for the analysis. We will load in a dataframe of values.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">analyses_params</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span>
    <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"raw_data"</span>, <span class="st">"AnalysisList.csv"</span><span class="op">)</span>,
    as.is <span class="op">=</span> <span class="cn">TRUE</span>,
    na.strings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"NR"</span>, <span class="st">"NA"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Endpoint_type</span> <span class="op">==</span> <span class="st">"Surv"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>name <span class="op">=</span> <span class="va">Analysis_name</span>,
                type <span class="op">=</span> <span class="va">Analysis_Type</span><span class="op">)</span></pre></div>
<p>For demonstration purposes we will select the first scenario to run.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">analyses_params</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span>

<span class="co"># fixed effects RANDOM=FALSE, random effects RANDOM=TRUE</span>
<span class="va">RANDOM</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="va">Model_effects</span> <span class="op">==</span> <span class="st">"RE"</span>

<span class="va">REFTX</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="va">REFTX</span>

<span class="co"># indicator for availability of binary endpoint data</span>
<span class="va">is_bin</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="va">BinData</span> <span class="op">==</span> <span class="st">"YES"</span>

<span class="co"># indicator for availability of median endpoint data</span>
<span class="va">is_med</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="va">MedData</span> <span class="op">==</span> <span class="st">"YES"</span></pre></div>
</div>
<div id="read-in-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#read-in-datasets" class="anchor"></a>Read in datasets</h3>
<p>The trials data consist of upto 3 separate dataframes. A main table, <code>subData</code>, and optional tables for median event time and binary data, <code>subDataMed</code> and <code>subDataBin</code> respectively.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">file_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"raw_data"</span><span class="op">)</span>, <span class="st">"/survdata_"</span>, <span class="va">analysis</span><span class="op">$</span><span class="va">Endpoint</span>, <span class="st">"_"</span><span class="op">)</span>

<span class="va">subData</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file_name</span>, <span class="va">analysis</span><span class="op">$</span><span class="va">type</span>, <span class="st">".csv"</span><span class="op">)</span>,
           header <span class="op">=</span> <span class="cn">TRUE</span>,
           as.is <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">subDataBin</span> <span class="op">&lt;-</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">is_bin</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file_name</span>, <span class="st">"bin.csv"</span><span class="op">)</span>,
             header <span class="op">=</span> <span class="cn">TRUE</span>,
             as.is <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span><span class="cn">NA</span><span class="op">}</span>

<span class="va">subDataMed</span> <span class="op">&lt;-</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">is_med</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">file_name</span>, <span class="st">"med.csv"</span><span class="op">)</span>,
             header <span class="op">=</span> <span class="cn">TRUE</span>,
             as.is <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>medR <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">medR</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span><span class="cn">NA</span><span class="op">}</span></pre></div>
</div>
<div id="build-model" class="section level3">
<h3 class="hasAnchor">
<a href="#build-model" class="anchor"></a>Build model</h3>
<p>Now we can create the NMA object to use in the modelling.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">nma_model</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="../reference/new_NMA.html">new_NMA</a></span><span class="op">(</span>subData <span class="op">=</span> <span class="va">subData</span>,
          subDataMed <span class="op">=</span> <span class="va">subDataMed</span>,
          subDataBin <span class="op">=</span> <span class="va">subDataBin</span>,
          bugs_params <span class="op">=</span> <span class="va">bugs_params</span>,
          is_random <span class="op">=</span> <span class="va">RANDOM</span>,
          refTx <span class="op">=</span> <span class="va">REFTX</span> ,
          effectParam <span class="op">=</span> <span class="st">"beta"</span>,
          modelParams <span class="op">=</span> <span class="st">"totresdev"</span>,
          label <span class="op">=</span> <span class="va">analysis</span><span class="op">$</span><span class="va">name</span>,
          endpoint <span class="op">=</span> <span class="va">analysis</span><span class="op">$</span><span class="va">Endpoint</span><span class="op">)</span>

<span class="va">nma_model</span>
<span class="co">#&gt; $dat</span>
<span class="co">#&gt; $dat$inits</span>
<span class="co">#&gt; function() {</span>
<span class="co">#&gt;       list(</span>
<span class="co">#&gt;         beta = c(NA, rnorm(nTx - 1, 0, 2)),</span>
<span class="co">#&gt;         sd = 0.1,</span>
<span class="co">#&gt;         alpha = rnorm(nStudies)) %&gt;% </span>
<span class="co">#&gt;         .[param_names]</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt; &lt;bytecode: 0x0000000020222370&gt;</span>
<span class="co">#&gt; &lt;environment: 0x0000000020225fb8&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$subData</span>
<span class="co">#&gt;     X                                 study                  base            tx</span>
<span class="co">#&gt; 1   6                ARCHER 1050 (Wu, 2017)               ERL/GEF           DAC</span>
<span class="co">#&gt; 2   9                   CONVINCE (Shi 2017)               CIS+PEM           ICO</span>
<span class="co">#&gt; 3  26      CTRI/2015/08/006113 (Patil 2017)             CARBO+PEM       ERL/GEF</span>
<span class="co">#&gt; 4  15   CTRI/2016/08/007149 (Noronha 2019b)               ERL/GEF GEF+CARBO+PEM</span>
<span class="co">#&gt; 5  22                      ENSURE (Wu 2015)               GEM+CIS       ERL/GEF</span>
<span class="co">#&gt; 6   5                   FLAURA (Soria 2018)               ERL/GEF           OSI</span>
<span class="co">#&gt; 7   4                   GOAL (Campelo 2018)               ERL/GEF       GEF+OLA</span>
<span class="co">#&gt; 8   3                    INCREASE (Li 2018)                   ICO ICO high-dose</span>
<span class="co">#&gt; 9  17 JO25567 (JapicCTI-111390) (Seto 2014)               ERL/GEF       ERL+BEV</span>
<span class="co">#&gt; 10  2             LUX-Lung 3 (Sequist 2013)               CIS+PEM           AFA</span>
<span class="co">#&gt; 11 24               LUX-Lung 6 (Wu 2014a)\n               GEM+CIS           AFA</span>
<span class="co">#&gt; 12 25                LUX-Lung 7 (Park 2016)               ERL/GEF           AFA</span>
<span class="co">#&gt; 13 20              NCT01017874 (Yang, 2014)               ERL/GEF CIS+PEM+GEF_m</span>
<span class="co">#&gt; 14  7              NCT01221077 (Leighl 2017               ERL/GEF       LIN+ERL</span>
<span class="co">#&gt; 15 18              NCT01469000 (Yang, 2020)               ERL/GEF       GEF+PEM</span>
<span class="co">#&gt; 16 16        NCT01532089 (Stinchcombe 2019)               ERL/GEF       ERL+BEV</span>
<span class="co">#&gt; 17 21                 NCT01769066 (Yu 2014)               CIS+PEM CIS+PEM+GEF_m</span>
<span class="co">#&gt; 18 28                 NCT01864681 (Li 2019)               ERL/GEF       GEF+MET</span>
<span class="co">#&gt; 19  8        NCT01897480 (Scagliotti, 2020)               ERL/GEF       EMI+ERL</span>
<span class="co">#&gt; 20 12               NCT02148380 (Han, 2017)               ERL/GEF     CARBO+PEM</span>
<span class="co">#&gt; 21 10               NCT02148380 (Han, 2017)               ERL/GEF       ERL/GEF</span>
<span class="co">#&gt; 22 11               NCT02148380 (Han, 2017)               ERL/GEF GEF+CARBO+PEM</span>
<span class="co">#&gt; 23 13      NEJ005/TCOG0902 (Sugawara, 2015) GEF+CARBO+PEM (Alter) GEF+CARBO+PEM</span>
<span class="co">#&gt; 24 27  NEJ009 (UMIN000006340) (Hosomi 2019)               ERL/GEF GEF+CARBO+PEM</span>
<span class="co">#&gt; 25 19                   NEJ026 (Saito 2019)               ERL/GEF       ERL+BEV</span>
<span class="co">#&gt; 26  1                RELAY (Nakagawa, 2019)               ERL/GEF       RAM+ERL</span>
<span class="co">#&gt; 27 14            SWOG S1403 (Goldberg 2018)                   AFA       AFA+CET</span>
<span class="co">#&gt; 28 23                 TORCH (Gridelli 2012)               GEM+CIS       ERL/GEF</span>
<span class="co">#&gt;          Lmean       Lse multi_arm Ltx Lbase Lstudy</span>
<span class="co">#&gt; 1  -0.47803580 0.1134403         0   7     1      6</span>
<span class="co">#&gt; 2  -0.43078292 0.1546265         0  19     5      9</span>
<span class="co">#&gt; 3  -0.41551544 0.1291164         0   1     4     24</span>
<span class="co">#&gt; 4  -0.67330000 0.1342100         0  12     1     13</span>
<span class="co">#&gt; 5  -1.07880966 0.2144855         0   1    18     20</span>
<span class="co">#&gt; 6  -0.77652879 0.1102381         0  22     1      5</span>
<span class="co">#&gt; 7  -0.28768207 0.1864509         0  16     1      4</span>
<span class="co">#&gt; 8  -0.30110509 0.1758496         0  20    19      3</span>
<span class="co">#&gt; 9  -0.61618614 0.2004921         0   9     1     15</span>
<span class="co">#&gt; 10 -0.71334989 0.1437422         0   2     5      2</span>
<span class="co">#&gt; 11 -1.34707365 0.1630306         0   2    18     22</span>
<span class="co">#&gt; 12 -0.24846136 0.1235321         0   2     1     23</span>
<span class="co">#&gt; 13 -0.18632958 0.3443691         0   6     1     18</span>
<span class="co">#&gt; 14  0.31188676 0.2970771         0  21     1      7</span>
<span class="co">#&gt; 15 -0.40047757 0.1499456         0  17     1     16</span>
<span class="co">#&gt; 16 -0.21072103 0.2457077         0   9     1     14</span>
<span class="co">#&gt; 17 -1.60943791 0.6908291         0   6     5     19</span>
<span class="co">#&gt; 18  0.03922071 0.1681749         0  15     1     26</span>
<span class="co">#&gt; 19 -0.11653382 0.1658275         0   8     1      8</span>
<span class="co">#&gt; 20  1.04982212 0.4706135         1   4     1     10</span>
<span class="co">#&gt; 21  0.00000000 0.2152550         1   1     1     10</span>
<span class="co">#&gt; 22 -0.73396918 0.4539455         1  12     1     10</span>
<span class="co">#&gt; 23 -0.34249031 0.2678118         0  12    13     11</span>
<span class="co">#&gt; 24 -0.71334989 0.1182584         0  12     1     25</span>
<span class="co">#&gt; 25 -0.50252682 0.1896482         0   9     1     17</span>
<span class="co">#&gt; 26 -0.52593926 0.1275307         0  23     1      1</span>
<span class="co">#&gt; 27  0.15700375 0.1967513         0   3     2     12</span>
<span class="co">#&gt; 28 -0.51082562 0.3536465         0   1    18     21</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$subDataBin</span>
<span class="co">#&gt;                     study    base      tx BinR BinN Btx Bbase Bstudy</span>
<span class="co">#&gt; 1 NCT01039948 (Mok, 2016) ERL/GEF ERL/GEF   34   38   1     1     33</span>
<span class="co">#&gt; 2 NCT01039948 (Mok, 2016) ERL/GEF GEF+FIC   27   33  14     1     33</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$subDataMed</span>
<span class="co">#&gt;                                     study          base            tx median</span>
<span class="co">#&gt; 1                                 An 2016       ERL/GEF       ERL/GEF   14.0</span>
<span class="co">#&gt; 2                                 An 2016       ERL/GEF       GEF+PEM   18.0</span>
<span class="co">#&gt; 3  CALGB 30406 (NCT00126581) (Janne 2012)       ERL/GEF       ERL/GEF   14.1</span>
<span class="co">#&gt; 4  CALGB 30406 (NCT00126581) (Janne 2012)       ERL/GEF ERL+PAC+CARBO   17.2</span>
<span class="co">#&gt; 5      GENOA / NCT02319577 (Genova, 2019)       ERL/GEF       ERL/GEF    9.5</span>
<span class="co">#&gt; 6      GENOA / NCT02319577 (Genova, 2019)       ERL/GEF       VIN+GEF    6.2</span>
<span class="co">#&gt; 7        IFCT-1503 ACE-Lung (Cortot 2019)           AFA           AFA   11.1</span>
<span class="co">#&gt; 8        IFCT-1503 ACE-Lung (Cortot 2019)           AFA       AFA+CET   12.8</span>
<span class="co">#&gt; 9                  NCT01502202 (Lee 2016) CIS+PEM+GEF_m       CIS+PEM    7.8</span>
<span class="co">#&gt; 10                 NCT01502202 (Lee 2016) CIS+PEM+GEF_m CIS+PEM+GEF_m   13.3</span>
<span class="co">#&gt; 11         UMIN000013586 (Kitagawa, 2019)       ERL/GEF       ERL/GEF   15.1</span>
<span class="co">#&gt; 12         UMIN000013586 (Kitagawa, 2019)       ERL/GEF       GEF+BEV    5.4</span>
<span class="co">#&gt;    medN medR mediantx medianbase medianstudy</span>
<span class="co">#&gt; 1    45   22        1          1          27</span>
<span class="co">#&gt; 2    45   22       17          1          27</span>
<span class="co">#&gt; 3    33   16        1          1          30</span>
<span class="co">#&gt; 4    33   16       10          1          30</span>
<span class="co">#&gt; 5    21   10        1          1          32</span>
<span class="co">#&gt; 6    23   11       24          1          32</span>
<span class="co">#&gt; 7    59   29        2          2          29</span>
<span class="co">#&gt; 8    59   29        3          2          29</span>
<span class="co">#&gt; 9    37   18        5          6          31</span>
<span class="co">#&gt; 10   39   19        6          6          31</span>
<span class="co">#&gt; 11   10    5        1          1          28</span>
<span class="co">#&gt; 12    6    3       11          1          28</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData</span>
<span class="co">#&gt; $dat$bugsData$Lstudy</span>
<span class="co">#&gt;  [1]  6  9 24 13 20  5  4  3 15  2 22 23 18  7 16 14 19 26  8 10 10 10 11 25 17</span>
<span class="co">#&gt; [26]  1 12 21</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Ltx</span>
<span class="co">#&gt;  [1]  7 19  1 12  1 22 16 20  9  2  2  2  6 21 17  9  6 15  8  4  1 12 12 12  9</span>
<span class="co">#&gt; [26] 23  3  1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Lbase</span>
<span class="co">#&gt;  [1]  1  5  4  1 18  1  1 19  1  5 18  1  1  1  1  1  5  1  1  1  1  1 13  1  1</span>
<span class="co">#&gt; [26]  1  2 18</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Lmean</span>
<span class="co">#&gt;  [1] -0.47803580 -0.43078292 -0.41551544 -0.67330000 -1.07880966 -0.77652879</span>
<span class="co">#&gt;  [7] -0.28768207 -0.30110509 -0.61618614 -0.71334989 -1.34707365 -0.24846136</span>
<span class="co">#&gt; [13] -0.18632958  0.31188676 -0.40047757 -0.21072103 -1.60943791  0.03922071</span>
<span class="co">#&gt; [19] -0.11653382  1.04982212  0.00000000 -0.73396918 -0.34249031 -0.71334989</span>
<span class="co">#&gt; [25] -0.50252682 -0.52593926  0.15700375 -0.51082562</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Lse</span>
<span class="co">#&gt;  [1] 0.1134403 0.1546265 0.1291164 0.1342100 0.2144855 0.1102381 0.1864509</span>
<span class="co">#&gt;  [8] 0.1758496 0.2004921 0.1437422 0.1630306 0.1235321 0.3443691 0.2970771</span>
<span class="co">#&gt; [15] 0.1499456 0.2457077 0.6908291 0.1681749 0.1658275 0.4706135 0.2152550</span>
<span class="co">#&gt; [22] 0.4539455 0.2678118 0.1182584 0.1896482 0.1275307 0.1967513 0.3536465</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$multi</span>
<span class="co">#&gt;  [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 0 0 0 0 0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$LnObs</span>
<span class="co">#&gt; [1] 28</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$nTx</span>
<span class="co">#&gt; [1] 24</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$nStudies</span>
<span class="co">#&gt; [1] 33</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$medianStudy</span>
<span class="co">#&gt;  [1] 27 27 30 30 32 32 29 29 31 31 28 28</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$medianTx</span>
<span class="co">#&gt;  [1]  1 17  1 10  1 24  2  3  5  6  1 11</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$medianBase</span>
<span class="co">#&gt;  [1] 1 1 1 1 1 1 2 2 6 6 1 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Bstudy</span>
<span class="co">#&gt; [1] 33 33</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Btx</span>
<span class="co">#&gt; [1]  1 14</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Bbase</span>
<span class="co">#&gt; [1] 1 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$medianN</span>
<span class="co">#&gt;  [1] 45 45 33 33 21 23 59 59 37 39 10  6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$medianR</span>
<span class="co">#&gt;  [1] 22 22 16 16 10 11 29 29 18 19  5  3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$median</span>
<span class="co">#&gt;  [1] 14.0 18.0 14.1 17.2  9.5  6.2 11.1 12.8  7.8 13.3 15.1  5.4</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$medianNObs</span>
<span class="co">#&gt; [1] 12</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Bn</span>
<span class="co">#&gt; [1] 38 33</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$Br</span>
<span class="co">#&gt; [1] 34 27</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$bugsData$BnObs</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dat$txList</span>
<span class="co">#&gt;  [1] "ERL/GEF"               "AFA"                   "AFA+CET"              </span>
<span class="co">#&gt;  [4] "CARBO+PEM"             "CIS+PEM"               "CIS+PEM+GEF_m"        </span>
<span class="co">#&gt;  [7] "DAC"                   "EMI+ERL"               "ERL+BEV"              </span>
<span class="co">#&gt; [10] "ERL+PAC+CARBO"         "GEF+BEV"               "GEF+CARBO+PEM"        </span>
<span class="co">#&gt; [13] "GEF+CARBO+PEM (Alter)" "GEF+FIC"               "GEF+MET"              </span>
<span class="co">#&gt; [16] "GEF+OLA"               "GEF+PEM"               "GEM+CIS"              </span>
<span class="co">#&gt; [19] "ICO"                   "ICO high-dose"         "LIN+ERL"              </span>
<span class="co">#&gt; [22] "OSI"                   "RAM+ERL"               "VIN+GEF"              </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $is_med</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $is_bin</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params</span>
<span class="co">#&gt; $bugs_params$PROG</span>
<span class="co">#&gt; [1] "openBugs"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params$N.BURNIN</span>
<span class="co">#&gt; [1] 10</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params$N.SIMS</span>
<span class="co">#&gt; [1] 150</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params$N.CHAINS</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params$N.THIN</span>
<span class="co">#&gt; [1] 1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params$PAUSE</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_params$run_bugs</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bugs_fn</span>
<span class="co">#&gt; function(...)</span>
<span class="co">#&gt;         bugs(program = "openbugs", ...)</span>
<span class="co">#&gt; &lt;bytecode: 0x000000001f0572a0&gt;</span>
<span class="co">#&gt; &lt;environment: 0x000000001f05b498&gt;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $is_random</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $refTx</span>
<span class="co">#&gt; [1] "ERL/GEF"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $effectParam</span>
<span class="co">#&gt; [1] "beta"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $modelParams</span>
<span class="co">#&gt; [1] "totresdev"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $label</span>
<span class="co">#&gt; [1] "BC_PFS_mFE"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $endpoint</span>
<span class="co">#&gt; [1] "PFS"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "nma"</span>
<span class="co">#&gt; attr(,"CALL")</span>
<span class="co">#&gt; attr(,"CALL")$subData</span>
<span class="co">#&gt; subData</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$subDataMed</span>
<span class="co">#&gt; subDataMed</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$subDataBin</span>
<span class="co">#&gt; subDataBin</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$bugs_params</span>
<span class="co">#&gt; bugs_params</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$is_random</span>
<span class="co">#&gt; RANDOM</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$refTx</span>
<span class="co">#&gt; REFTX</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$effectParam</span>
<span class="co">#&gt; [1] "beta"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$modelParams</span>
<span class="co">#&gt; [1] "totresdev"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$label</span>
<span class="co">#&gt; analysis$name</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"CALL")$endpoint</span>
<span class="co">#&gt; analysis$Endpoint</span></pre></div>
</div>
<div id="run-mcmc" class="section level3">
<h3 class="hasAnchor">
<a href="#run-mcmc" class="anchor"></a>Run MCMC</h3>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">nma_res</span> <span class="op">&lt;-</span> <span class="fu">NMA_run</span><span class="op">(</span><span class="va">nma_model</span><span class="op">)</span>
<span class="co">#&gt; Loading required namespace: BRugs</span>
<span class="co">#&gt; Welcome to BRugs connected to OpenBUGS version 3.2.3</span>
<span class="co">#&gt; model is syntactically correct</span>
<span class="co">#&gt; data loaded</span>
<span class="co">#&gt; model compiled</span>
<span class="co">#&gt; Initializing chain 1:</span>
<span class="co">#&gt; initial values loaded and chain initialized but another chain contain uninitialized variables</span>
<span class="co">#&gt; Initializing chain 2:</span>
<span class="co">#&gt; model is initialized</span>
<span class="co">#&gt; model is already initialized</span>
<span class="co">#&gt; Sampling has been started ...</span>
<span class="co">#&gt; 10 updates took 0 s</span>
<span class="co">#&gt; deviance set</span>
<span class="co">#&gt; monitor set for variable 'beta'</span>
<span class="co">#&gt; monitor set for variable 'totresdev'</span>
<span class="co">#&gt; monitor set for variable 'deviance'</span>
<span class="co">#&gt; 150 updates took 0 s</span>
<span class="co">#&gt; Warning in dir.create(path = here(folder)): 'C:</span>
<span class="co">#&gt; \Users\Nathan\Documents\ICON\NMA\output' already exists</span>

<span class="va">nma_res</span>
<span class="co">#&gt; Inference for Bugs model at "C:/Users/Nathan/Documents/ICON/NMA/inst/FE_med_bin.txt", fit using OpenBUGS,</span>
<span class="co">#&gt;  2 chains, each with 160 iterations (first 10 discarded)</span>
<span class="co">#&gt;  n.sims = 300 iterations saved</span>
<span class="co">#&gt;            mean    sd  2.5%   25%   50%    75%  97.5% Rhat n.eff</span>
<span class="co">#&gt; beta[2]     0.1   1.0  -1.4  -0.7  -0.1    0.7    1.8  5.7     2</span>
<span class="co">#&gt; beta[3]    -0.8   1.1  -1.8  -1.5  -1.1   -0.7    1.9  1.9     4</span>
<span class="co">#&gt; beta[4]     0.4   0.1   0.2   0.4   0.4    0.5    0.7  1.0   300</span>
<span class="co">#&gt; beta[5]     0.9   1.3  -0.4  -0.4   0.5    2.1    2.8 10.0     2</span>
<span class="co">#&gt; beta[6]     1.0   1.0  -1.1   0.6   1.4    1.8    1.9  2.9     3</span>
<span class="co">#&gt; beta[7]    -0.5   0.1  -0.7  -0.6  -0.5   -0.4   -0.2  1.0   300</span>
<span class="co">#&gt; beta[8]    -0.1   0.2  -0.5  -0.2  -0.1    0.0    0.2  1.0   300</span>
<span class="co">#&gt; beta[9]    -0.5   0.1  -0.7  -0.6  -0.5   -0.4   -0.3  1.0   300</span>
<span class="co">#&gt; beta[10]    0.0   0.5  -1.2  -0.2   0.1    0.3    0.6  1.2    32</span>
<span class="co">#&gt; beta[11]    1.0   0.5   0.1   0.6   1.0    1.4    2.0  1.1    41</span>
<span class="co">#&gt; beta[12]   -0.7   0.1  -0.9  -0.8  -0.7   -0.7   -0.5  1.0   300</span>
<span class="co">#&gt; beta[13]   -0.4   0.3  -0.9  -0.6  -0.4   -0.2    0.2  1.0   300</span>
<span class="co">#&gt; beta[14]   -0.2   0.4  -1.4  -0.4  -0.1    0.0    1.0  1.4     8</span>
<span class="co">#&gt; beta[15]    0.0   0.2  -0.3  -0.1   0.0    0.2    0.4  1.0   300</span>
<span class="co">#&gt; beta[16]   -0.3   0.2  -0.7  -0.4  -0.3   -0.2    0.0  1.0   210</span>
<span class="co">#&gt; beta[17]   -1.0   0.8  -2.2  -1.9  -0.5   -0.4   -0.2  1.0    64</span>
<span class="co">#&gt; beta[18]    1.2   0.6   0.3   0.7   1.2    1.6    2.2  4.2     2</span>
<span class="co">#&gt; beta[19]    0.5   1.3  -1.1  -0.8   0.2    1.7    2.4  8.9     2</span>
<span class="co">#&gt; beta[20]    0.1   1.3  -1.5  -1.1  -0.1    1.4    2.2  8.1     2</span>
<span class="co">#&gt; beta[21]    0.3   0.3  -0.2   0.1   0.3    0.5    0.8  1.0   280</span>
<span class="co">#&gt; beta[22]   -0.8   0.1  -1.0  -0.8  -0.8   -0.7   -0.6  1.0   300</span>
<span class="co">#&gt; beta[23]   -0.5   0.1  -0.8  -0.6  -0.5   -0.4   -0.3  1.0   300</span>
<span class="co">#&gt; beta[24]    0.7   0.6  -0.3   0.2   0.5    1.1    1.8  1.0   300</span>
<span class="co">#&gt; totresdev 586.3 514.3  91.2 141.5 375.0 1009.7 1793.1  1.3    11</span>
<span class="co">#&gt; deviance  603.8 516.4 105.3 156.9 390.0 1025.4 1819.0  1.3    12</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; For each parameter, n.eff is a crude measure of effective sample size,</span>
<span class="co">#&gt; and Rhat is the potential scale reduction factor (at convergence, Rhat=1).</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; DIC info (using the rule, pD = Dbar-Dhat)</span>
<span class="co">#&gt; pD = 387.1 and DIC = 990.9</span>
<span class="co">#&gt; DIC is an estimate of expected predictive error (lower deviance is better).</span>

<span class="co"># diagnostics(nma_res)</span>
<span class="co"># nma_outputs(nma_res)</span></pre></div>
</div>
<div id="reconfigure-model" class="section level3">
<h3 class="hasAnchor">
<a href="#reconfigure-model" class="anchor"></a>Reconfigure model</h3>
<p>It is simple to modify an existing analysis without repeating the previous steps. For example, we can run the NMA for a random effects model version of the same model.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">nma_model2</span> <span class="op">&lt;-</span>
  <span class="fu">NMA_update</span><span class="op">(</span><span class="va">nma_model</span>,
             is_random <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">nma_res2</span> <span class="op">&lt;-</span> <span class="fu">NMA_run</span><span class="op">(</span><span class="va">nma_model2</span>,
                    output_dir <span class="op">=</span> <span class="st">"RE output"</span><span class="op">)</span>
<span class="co">#&gt; model is syntactically correct</span>
<span class="co">#&gt; data loaded</span>
<span class="co">#&gt; model compiled</span>
<span class="co">#&gt; Initializing chain 1:</span>
<span class="co">#&gt; initial values loaded but chain contain uninitialized variables</span>
<span class="co">#&gt; Initializing chain 2:</span>
<span class="co">#&gt; initial values loaded but chain contain uninitialized variables</span>
<span class="co">#&gt; initial values generated, model initialized</span>
<span class="co">#&gt; Sampling has been started ...</span>
<span class="co">#&gt; 10 updates took 0 s</span>
<span class="co">#&gt; deviance set</span>
<span class="co">#&gt; monitor set for variable 'beta'</span>
<span class="co">#&gt; monitor set for variable 'totresdev'</span>
<span class="co">#&gt; monitor set for variable 'deviance'</span>
<span class="co">#&gt; 150 updates took 0 s</span>
<span class="co">#&gt; Warning in dir.create(path = here(folder)): 'C:</span>
<span class="co">#&gt; \Users\Nathan\Documents\ICON\NMA\RE output' already exists</span>

<span class="co"># diagnostics(nma_res2, save = TRUE)</span>
<span class="co"># nma_outputs(nma_res2, save = TRUE)</span>

<span class="co"># plotNetwork(nma_model)</span></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nathan Green.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
